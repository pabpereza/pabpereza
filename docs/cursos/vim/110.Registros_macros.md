---
title: "Registros y Macros: Automatizaci칩n B치sica"
description: "Aprende a usar registros y macros en Vim para automatizar tareas repetitivas y mejorar tu flujo de trabajo. Domina estas herramientas para alcanzar velocidades de edici칩n profesionales."
tags: [vim, registros, macros, automatizaci칩n, productividad]
keywords: [vim, registros, macros, automatizaci칩n, productividad]
image: 'https://pabpereza.dev/img/banner_vim.png'
sidebar_label: "Registros y Macros"
---

# Registros y Macros: Automatizaci칩n B치sica

Los registros y macros son caracter칤sticas poderosas de Vim que te permiten automatizar tareas repetitivas y almacenar texto de manera eficiente. Son fundamentales para alcanzar velocidades de edici칩n profesionales.

## 游늶 Registros (Registers)

Los registros son ubicaciones de almacenamiento para texto en Vim. Pi칠nsalos como m칰ltiples portapapeles que puedes usar simult치neamente.

### Tipos de registros

#### Registros numerados (0-9)
- `"0` - 칔ltimo texto copiado (yank)
- `"1-"9` - Historial de texto eliminado

#### Registros con nombre (a-z, A-Z)
- `"a-"z` - Registros min칰sculas (sobrescriben)
- `"A-"Z` - Registros may칰sculas (agregan al contenido)

#### Registros especiales
- `""` - Registro sin nombre (por defecto)
- `"+` - Portapapeles del sistema
- `"*` - Selecci칩n primaria (X11)
- `"/` - 칔ltimo patr칩n de b칰squeda
- `":` - 칔ltimo comando ejecutado
- `".` - 칔ltimo texto insertado
- `"%` - Nombre del archivo actual
- `"#` - Nombre del archivo alternativo

### Comandos b치sicos con registros

#### Copiar a registro
```vim
"ayy        " Copiar l칤nea al registro 'a'
"A5yy       " Agregar 5 l칤neas al registro 'a'
"byiw       " Copiar palabra al registro 'b'
"cy$        " Copiar hasta final de l칤nea al registro 'c'
```

#### Pegar desde registro
```vim
"ap         " Pegar contenido del registro 'a'
"bP         " Pegar antes del cursor desde registro 'b'
"+p         " Pegar desde portapapeles del sistema
```

#### Ver contenido de registros
```vim
:reg        " Ver todos los registros
:reg a      " Ver solo el registro 'a'
:reg abc    " Ver registros 'a', 'b', 'c'
```

## 游꿟 Macros

Las macros te permiten grabar una secuencia de comandos y reproducirla m칰ltiples veces. Son perfectas para tareas repetitivas.

### Grabaci칩n b치sica de macros
```vim
qa          " Empezar a grabar macro en registro 'a'
[comandos]  " Ejecutar los comandos que quieres grabar
q           " Parar grabaci칩n
```

### Ejecutar macros
```vim
@a          " Ejecutar macro 'a' una vez
5@a         " Ejecutar macro 'a' cinco veces
@@          " Repetir la 칰ltima macro ejecutada
```

### Ejemplo paso a paso
Supongamos que tienes esta lista y quieres agregar comillas y comas:
```
Juan
Mar칤a
Pedro
Ana
```

1. Posici칩nate en la primera l칤nea
2. `qa` - Empezar grabaci칩n en registro 'a'
3. `I"` - Insertar comilla al inicio
4. `<Esc>` - Volver a modo normal
5. `A",` - Agregar comilla y coma al final
6. `<Esc>` - Volver a modo normal
7. `j0` - Bajar una l칤nea e ir al inicio
8. `q` - Parar grabaci칩n

Ahora ejecuta `3@a` para aplicar a las siguientes 3 l칤neas.

## 游 T칠cnicas Avanzadas

### Macros recursivas
```vim
qa          " Empezar grabaci칩n
[comandos]
@a          " Llamar a s칤 misma (recursi칩n)
q           " Parar grabaci칩n
```

La recursi칩n se detendr치 cuando encuentre un error (como final de archivo).

### Editar macros
```vim
:let @a = '@a'    " Ver contenido de macro 'a'
```

Luego puedes editar la l칤nea y ejecutar para modificar la macro.

### Guardar macros en archivo
Agrega a tu `.vimrc`:
```vim
" Macro para formatear funci칩n JavaScript
let @j = 'I  ^[A {^M}^[kA^M^['
```

### Aplicar macro a selecci칩n visual
```vim
:'<,'>normal @a    " Aplicar macro 'a' a selecci칩n
```

### Aplicar macro a patr칩n
```vim
:g/patr칩n/normal @a    " Aplicar macro 'a' a l칤neas que coincidan
```

## 游닇 Ejercicios Pr치cticos

### Ejercicio 1: Registros b치sicos
1. Copia diferentes p치rrafos a registros `a`, `b`, `c`
2. Lista los registros con `:reg`
3. Pega contenido alternando entre registros
4. Usa registro de portapapeles `"+`

### Ejercicio 2: Macro simple - Formatear lista
Dado este texto:
```
task1: pending
task2: pending
task3: pending
task4: pending
```

Crea una macro que convierta cada l칤nea a:
```
- [ ] task1: pending
```

### Ejercicio 3: Macro compleja - Refactoring
Dado este c칩digo CSS:
```css
.button {
  background-color: blue;
}
.header {
  background-color: blue;
}
.footer {
  background-color: blue;
}
```

Crea una macro que cambie `blue` por `var(--primary-color)` en cada regla.

### Ejercicio 4: Macro recursiva
Crea una macro que agregue n칰meros de l칤nea al inicio de cada l칤nea:
```
L칤nea sin n칰mero
Otra l칤nea
Tercera l칤nea
```

Resultado:
```
1. L칤nea sin n칰mero
2. Otra l칤nea
3. Tercera l칤nea
```

## 游꿢 Casos de Uso Reales

### Refactoring de c칩digo
```vim
" Cambiar nombres de variables en m칰ltiples l칤neas
qa
/oldVar<CR>
cwnewVar<Esc>
@a
q
```

### Formateo de datos
```vim
" Convertir CSV a JSON
qa
I"<Esc>
f,r:
A",<Esc>
j0
@a
q
```

### Generaci칩n de c칩digo repetitivo
```vim
" Crear getters/setters autom치ticamente
qa
yiwIget <Esc>A() {<CR>return this.<Esc>pa;<CR>}<Esc>
j0
@a
q
```

### Limpieza de texto
```vim
" Eliminar espacios extra y normalizar
qa
:s/  */ /g<CR>
j0
@a
q
```

## 丘뙖잺 Configuraci칩n Recomendada

```vim
" Mostrar registros f치cilmente
nnoremap <Leader>r :reg<CR>

" Usar portapapeles del sistema por defecto
set clipboard=unnamedplus

" Facilitar uso de macros
nnoremap Q @q

" Macro r치pida en registro 'q'
nnoremap <Leader>q qq
nnoremap <Leader>Q @q

" Ver 칰ltimo comando
nnoremap <Leader>: :<C-r>:<CR>
```

## 游끥 Tips Pro

### Preparaci칩n de macros
1. **Planifica primero**: Piensa la secuencia antes de grabar
2. **Posici칩n inicial**: Aseg칰rate de empezar en posici칩n consistente
3. **Movimientos relativos**: Usa movimientos que funcionen en cualquier l칤nea
4. **Estado final**: Termina en posici칩n lista para repetir

### Debugging de macros
1. **Usa `:reg a`** para ver el contenido exacto
2. **Prueba paso a paso** antes de aplicar masivamente
3. **Usa `u`** para deshacer si algo sale mal
4. **Graba en may칰sculas** para agregar a macro existente

### Optimizaci칩n
```vim
" En lugar de:
qa
dd
j
@a
q

" Mejor:
qa
ddj
@a
q
```

### Macros complejas
- Usa marcas (`ma`, `'a`) para posicionamiento absoluto
- Combina con b칰squedas para mayor precisi칩n
- Considera usar `:g/patr칩n/normal @a` para aplicaci칩n selectiva

## 游댕 Comandos Relacionados

### Trabajar con m칰ltiples archivos
```vim
:argdo normal @a    " Aplicar macro a todos los archivos en arglist
:bufdo normal @a    " Aplicar macro a todos los buffers
```

### Combinaci칩n con substitute
```vim
:g/patr칩n/normal @a    " Macro solo en l칤neas que coincidan
:%s/old/new/g | normal @a    " Substitute + macro
```

## 游닄 Recursos Adicionales

- `:help registers` - Documentaci칩n completa de registros
- `:help recording` - Gu칤a de grabaci칩n de macros
- `:help complex-repeat` - T칠cnicas avanzadas de repetici칩n

---


춰Los registros y macros son herramientas incre칤blemente poderosas que separan a los usuarios avanzados de Vim de los principiantes. Con pr치ctica, te permitir치n automatizar casi cualquier tarea repetitiva!
