<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>404 • Archivos Jedi incompletos</title>
  <meta name="description" content="Página 404 inspirada en Obi‑Wan Kenobi buscando en los Archivos Jedi (Episodio II)." />
  <style>
    :root{
      --bg:#0a0f1d;           /* fondo base */
      --fg:#e6edf7;           /* texto */
      --muted:#8ea3c2;        /* texto secundario */
      --accent:#4cc2ff;       /* cian tecnológico */
      --accent2:#b993ff;      /* púrpura tenue */
      --danger:#ff6b6b;       /* rojo aviso */
      --card:#0f1730cc;       /* tarjeta semitransparente */
      --grid:rgba(120,160,255,.12);
      --glow:#73e0ff;
      --scene-url: none;      /* opcional: URL de imagen/GIF de la escena */
    }

    /* --- Reset suave --- */
    html,body{height:100%}
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Inter, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--fg); background: radial-gradient(1200px 600px at 70% -20%, #1a2444 0%, #0a0f1d 45%), var(--bg);
      display:grid; place-items:center; 
      overflow-y:auto; overflow-x:hidden; /* permitir scroll vertical */
    }

    /* --- Estrellas sencillas --- */
    .stars, .stars:after{
      content:""; position:fixed; inset:-200vh; background-image:
        radial-gradient(2px 2px at 20% 30%, #ffffffaa 50%, transparent 51%),
        radial-gradient(1px 1px at 70% 80%, #ffffff66 50%, transparent 51%),
        radial-gradient(1.5px 1.5px at 40% 60%, #ffffff88 50%, transparent 51%),
        radial-gradient(1px 1px at 90% 20%, #ffffff55 50%, transparent 51%);
      background-repeat:repeat; background-size: 600px 600px, 800px 800px, 700px 700px, 900px 900px;
      animation: drift 120s linear infinite;
      pointer-events:none; z-index:0; opacity:.7;
    }
    .stars:after{ animation-duration:160s; opacity:.5; }
    @keyframes drift{to{transform:translate3d(300px,200px,0)}}

    /* --- Contenedor --- */
    .wrap{ position:relative; z-index:1; width:min(960px, 92vw); }

    .card{
      background: var(--card);
      backdrop-filter: blur(8px);
      border: 1px solid #243562;
      border-radius: 20px;
      padding: clamp(20px, 4vw, 36px);
      box-shadow: 0 10px 30px rgba(0,0,0,.45), 0 0 40px rgba(115,224,255,.10) inset;
    }

    /* --- Título 404 --- */
    .title{ display:flex; align-items:center; gap:18px; flex-wrap:wrap; }
    h1{
      margin:0; font-weight:800; letter-spacing:.02em;
      font-size: clamp(38px, 6vw, 72px);
      line-height:1;
      background: linear-gradient(90deg, #fff, #bfe7ff 30%, #d7c9ff 60%, #fff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow: 0 0 18px rgba(115,224,255,.25);
    }
    .subtitle{
      margin:8px 0 0; color:var(--muted); font-size: clamp(14px, 2.2vw, 18px);
    }

    /* --- Terminal de archivo Jedi --- */
    .terminal{
      margin-top:22px; border:1px solid #2a3d6d; border-radius:14px; overflow:hidden; background:#0d1430d9;
    }
    .term-bar{ display:flex; gap:8px; align-items:center; padding:10px 12px; background:#0b1230; border-bottom:1px solid #233563; }
    .dot{ width:10px; height:10px; border-radius:50%; }
    .dot.red{ background:#ff5f56 } .dot.yellow{ background:#ffbd2e } .dot.green{ background:#27c93f }
    .term-body{ padding:16px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .prompt{ color:#6ef0ff }
    .input{ display:inline-block; min-width:10ch; color:#fff }
    .cursor{ display:inline-block; width:8px; height:1.1em; background:#9adfff; margin-left:2px; vertical-align:middle; animation: blink 1s steps(1) infinite }
    @keyframes blink{ 50%{ opacity:0 } }

    /* --- Cita --- */
    blockquote{ margin:18px 0 0; padding:12px 16px; border-left:3px solid var(--accent); background: rgba(76,194,255,.08); border-radius: 0 10px 10px 0; color:#d7e7ff }
    blockquote footer{ color:var(--muted); font-size:.9em; margin-top:6px }

    /* --- Botones --- */
    .actions{ display:flex; flex-wrap:wrap; gap:12px; margin-top:24px }
    .btn{
      appearance:none; border:none; border-radius: 999px; padding: 12px 18px; font-weight:700; letter-spacing:.2px;
      color:#051028; background:linear-gradient(180deg, #9adfff, #4cc2ff); box-shadow: 0 8px 22px rgba(76,194,255,.35);
      cursor:pointer; text-decoration:none; display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 26px rgba(76,194,255,.45); }
    .btn.secondary{ color:#e8e8ff; background:linear-gradient(180deg, #3a4b7a, #2a3a64); box-shadow: 0 8px 22px rgba(0,0,0,.35); border:1px solid #42578c }

    /* --- Ilustración sable de luz (SVG) --- */
    .saber{ width:min(340px, 46vw); height:auto; filter: drop-shadow(0 0 16px rgba(115,224,255,.45)); }
    .blade{ transform-origin: left center; animation: hum 2.2s ease-in-out infinite; transition: width 1.2s cubic-bezier(.22,.8,.3,1), filter .6s, fill .4s; }
    /* Estado activado por easter egg: expansión dinámica vía JS + brillo intenso */
    .blade.blade-energized{
      animation: hum 1.2s ease-in-out infinite;
      filter: drop-shadow(0 0 8px #e9d2ff) drop-shadow(0 0 18px #c27dff) drop-shadow(0 0 38px #a23dff) drop-shadow(0 0 70px #7a00ff);
      fill: url(#bladeGradientPurple);
    }
    @keyframes hum{ 0%,100%{ filter: drop-shadow(0 0 16px var(--glow)) } 50%{ filter: drop-shadow(0 0 30px var(--glow)) } }
    /* Destello de pantalla al energizar */
    .screen-flash{position:fixed;inset:0;pointer-events:none;z-index:999;background:
      radial-gradient(circle at 50% 50%,rgba(255,255,255,.9),rgba(210,170,255,.65) 30%,rgba(130,60,255,.55) 55%,rgba(40,0,90,.85) 80%,rgba(10,0,30,1) 100%);
      mix-blend-mode:screen;animation:flashPulse .95s ease-out forwards;}
    @keyframes flashPulse{0%{opacity:0;filter:blur(6px)}4%{opacity:1;filter:blur(2px)}45%{opacity:.35}100%{opacity:0;filter:blur(18px)}}
    .flare-bar{position:fixed;left:0;top:50%;height:140px;width:100%;transform:translateY(-50%);background:linear-gradient(90deg,transparent,rgba(255,240,255,.8) 35%,rgba(180,100,255,.9) 50%,rgba(255,240,255,.8) 65%,transparent);opacity:.0;filter:blur(18px);pointer-events:none;z-index:998;animation:flareBar 1s ease-out forwards}
    @keyframes flareBar{0%{opacity:0;transform:translateY(-50%) scaleX(.05)}10%{opacity:1}55%{opacity:.4}100%{opacity:0;transform:translateY(-50%) scaleX(1.2)}}

    /* --- Panel de escena opcional --- */
    .scene{
      position:relative; margin:22px 0 0; border:1px dashed #2b4378; border-radius:14px; min-height:180px; overflow:hidden;
      background: #0c1430 center/cover no-repeat;
      background-image: var(--scene-url);
    }
    .scene::after{
      content: attr(data-caption);
      position:absolute; inset:auto 0 0 0; padding:10px 12px; background: linear-gradient(180deg, transparent, rgba(0,0,0,.55));
      color:#d9e7ff; font-size: 13px; letter-spacing:.2px;
    }

    /* --- Footer --- */
    footer.site{ margin-top:18px; color:var(--muted); font-size:12.5px; text-align:center }
    a{ color:#9adfff }

    @media (prefers-reduced-motion: reduce){
      .stars,.stars:after,.blade{ animation: none }
      .btn:hover{ transform:none }
      .cursor{ animation:none }
    }
  </style>
</head>
<body aria-labelledby="title" data-scene="" data-caption="">
  <div class="stars" aria-hidden="true"></div>
  <main class="wrap" role="main">
    <section class="card" aria-live="polite">
      <div class="title">
        <!-- Sable de luz (ilustración propia, sin derechos) -->
        <svg class="saber" viewBox="0 0 500 90" role="img" aria-label="Sable de luz encendido">
          <defs>
            <linearGradient id="bladeGradient" x1="0" x2="1">
              <stop offset="0%" stop-color="#d0f7ff"/>
              <stop offset="100%" stop-color="#70e3ff"/>
            </linearGradient>
            <linearGradient id="bladeGradientPurple" x1="0" x2="1">
              <stop offset="0%" stop-color="#f5e6ff"/>
              <stop offset="50%" stop-color="#c78aff"/>
              <stop offset="100%" stop-color="#8d32ff"/>
            </linearGradient>
          </defs>
          <!-- Empuñadura -->
          <rect x="0" y="35" width="120" height="20" rx="4" fill="#20252f"/>
          <rect x="8" y="32" width="14" height="26" rx="2" fill="#9aa3b2"/>
          <rect x="28" y="32" width="14" height="26" rx="2" fill="#7f889a"/>
          <rect x="48" y="32" width="14" height="26" rx="2" fill="#9aa3b2"/>
          <circle cx="104" cy="45" r="4" fill="#ff5f56"/>
          <rect x="110" y="37" width="10" height="16" rx="2" fill="#3a4150"/>
          <!-- Hoja -->
          <rect class="blade" id="bladeRect" x="120" y="26" width="360" height="38" rx="6" fill="url(#bladeGradient)" opacity=".95"/>
          <!-- Resplandor -->
          <rect x="120" y="20" width="360" height="50" rx="10" fill="#b8f1ff" opacity=".18"/>
        </svg>
        <div>
          <h1 id="title">404 — Archivo no encontrado</h1>
          <p class="subtitle">Obi‑Wan buscó en los Archivos Jedi y… esto ruta no aparece.</p>
        </div>
      </div>

      <!-- Terminal estilo "Archivos Jedi" -->
      <div class="terminal" role="group" aria-label="Terminal de búsqueda">
        <div class="term-bar" aria-hidden="true">
          <span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span>
          <span style="margin-left:8px;color:#c8d8ff;opacity:.8">/archives/jedi</span>
        </div>
        <div class="term-body" aria-live="polite">
          <div><span class="prompt">jedi@coruscant</span>:<span style="color:#7fa3ff">~</span>$ buscar <span style="color:#b993ff">"${ruta}"</span></div>
          <div style="margin-top:6px;color:#a7c7ff">⟶ Resultado: <span style="color:var(--danger);font-weight:700">no encontrado</span> (código: 404)</div>
          <div style="margin-top:6px;color:#6bd1ff">Sugerencia: revisa el <em>holomapa</em> o vuelve al <em>templo</em>.</div>
          <div style="margin-top:12px"><span class="prompt">jedi@coruscant</span>:<span style="color:#7fa3ff">~</span>$ <span class="input" aria-hidden="true">Introduce la contraseña ;)</span><span class="cursor" aria-hidden="true"></span></div>
        </div>
      </div>

      <blockquote>
        “Si un elemento no aparece en nuestros registros, entonces no existe”.
        <footer>— Maestra bibliotecaria (Star Wars: Episodio II)</footer>
      </blockquote>

      <div class="scene" id="scene" data-caption="" aria-label="Panel de escena">
        <img src="https://pabpereza.dev/img/404.gif" alt="Obi-Wan Kenobi buscando en los Archivos Jedi" style="width:100% ;display:block;" />  
      </div>

      <div class="actions" role="group" aria-label="Acciones">
        <a class="btn" href="https://pabpereza.dev" aria-label="Volver al inicio">⬅ Volver al inicio</a>
        <a class="btn secondary" href="mailto:pabloperezaradros@gmail.com?subject=Error%20404&body=No%20se%20encontr%C3%B3%20la%20ruta%3A%20${encodeURIComponent(location.pathname)}" aria-label="Informar del error">⚠️ Informar del error</a>
      </div>
    </section>
    <footer class="site">ID de incidente: <span id="rid"></span> • <span aria-hidden="true">|</span> Esta es una página homenaje no oficial inspirada en una escena del Episodio II.</footer>
  </main>

  <script>
    // ID pseudoaleatorio para logs
    const rid = (crypto.getRandomValues(new Uint32Array(2)).join('-')); 
    document.getElementById('rid').textContent = rid;

    // Pequeño easter egg: pulsa "J", "E", "D", "I" para un zumbido de sable
    (function(){
      const seq = ['j','e','d','i'];
      let idx = 0;
      let playedOnce = false;
      let handler;

      function onKey(e){
        if (playedOnce) return;
        if(e.key.toLowerCase() === seq[idx]){ idx++; } else { idx = 0; }
        if(idx === seq.length){
          idx = 0;
          playedOnce = true;
          playHumOnce();
          // Quitamos el listener para evitar más trabajo innecesario
          window.removeEventListener('keydown', handler);
        }
      }

      handler = onKey;
      window.addEventListener('keydown', handler);

      function playHumOnce(){
        try{
          const AudioCtx = window.AudioContext || window.webkitAudioContext;
          if(!AudioCtx) return;
          const ctx = new AudioCtx();
          fetch('https://pabpereza.dev/sounds/sable-laser.mp3')
            .then(r => r.arrayBuffer())
            .then(ab => ctx.decodeAudioData(ab))
            .then(buffer => {
              const src = ctx.createBufferSource();
              src.buffer = buffer;
              src.loop = false; // reproducir una sola vez
              const gain = ctx.createGain();
              gain.gain.value = 0.2; // volumen
              src.connect(gain).connect(ctx.destination);
              src.start(0);
              src.onended = () => { try{ ctx.close(); }catch(_){} };
            })
            .catch(()=>{ try{ ctx.close(); }catch(_){} });
            const blade = document.getElementById('bladeRect');
            if(blade){
              blade.classList.add('blade-energized');
              try{
                const svg = blade.ownerSVGElement;
                const vb = svg.viewBox.baseVal;
                const x = parseFloat(blade.getAttribute('x')) || 0;
                const target = vb.width - x; // máximo dentro del viewBox
                blade.setAttribute('data-orig-width', blade.getAttribute('width'));
                // Retracción casi completa y expansión total
                blade.setAttribute('width', 2);
                requestAnimationFrame(()=>{
                  requestAnimationFrame(()=>{
                    blade.setAttribute('width', target);
                  });
                });
              }catch(_){/* ignore */}
            }
            // Destello pantalla
            try{
              const flash = document.createElement('div'); flash.className='screen-flash'; document.body.appendChild(flash);
              const bar = document.createElement('div'); bar.className='flare-bar'; document.body.appendChild(bar);
              const cleanup = el => el.addEventListener('animationend', ()=>el.remove(), {once:true});
              cleanup(flash); cleanup(bar);
            }catch(_){/* ignore */}
        }catch(err){ /* audio no disponible */ }
      }
    })();


    let played = false;
    function playHelloThere(){
      if (played) return;
        try{
          const AudioCtx = window.AudioContext || window.webkitAudioContext;
          if(!AudioCtx) return;
          const ctx = new AudioCtx();
          fetch('https://pabpereza.dev/sounds/hello-there.mp3')
            .then(r => r.arrayBuffer())
            .then(ab => ctx.decodeAudioData(ab))
            .then(buffer => {
              const src = ctx.createBufferSource();
              src.buffer = buffer;
              src.loop = false; // reproducir una sola vez
              const gain = ctx.createGain();
              gain.gain.value = 0.2; // volumen
              src.connect(gain).connect(ctx.destination);
              src.start(0);
              src.onended = () => { try{ ctx.close(); }catch(_){} };
            })
            .catch(()=>{ try{ ctx.close(); }catch(_){} });
        played = true;
      }catch(_){ /* reproducción no soportada */ }
    }
    
    const triggerOnce = () => { playHelloThere(); };
    window.addEventListener('touchstart', triggerOnce, { once: true, passive: true });
    window.addEventListener('keydown', triggerOnce, { once: true });
    window.addEventListener('click', triggerOnce, { once: true, passive: true });

  </script>

</body>
</html>